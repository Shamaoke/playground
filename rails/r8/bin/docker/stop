#! /usr/bin/env zsh

##
## ::: Docker stop script :::
##

declare container_ids_path=$PWD/tmp/docker/container_ids

##
## ::: Utilities :::
##

##
## each ($array) $function -> $new_array
##
function each; foreach e (${@[1,-2]}) { ${@[-1]} $e }

function main TRAPEXIT {

  read -r -d '' -A container_ids < $container_ids_path

  f() { docker container stop $1 }

  each $container_ids f

  :>$container_ids_path
}

